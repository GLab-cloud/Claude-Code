<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emoji Physics Shooter</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        overflow: hidden;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        cursor: crosshair;
      }
      canvas {
        display: block;
        background: rgba(0, 0, 0, 0.1);
      }
      #controls {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(255, 255, 255, 0.95);
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        min-width: 250px;
        backdrop-filter: blur(10px);
      }
      h2 {
        margin: 0 0 15px 0;
        color: #333;
        font-size: 20px;
      }
      .control-group {
        margin: 15px 0;
      }
      label {
        display: block;
        color: #555;
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 8px;
      }
      input[type="range"] {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: #ddd;
        outline: none;
        -webkit-appearance: none;
      }
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: #667eea;
        cursor: pointer;
      }
      input[type="range"]::-moz-range-thumb {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: #667eea;
        cursor: pointer;
        border: none;
      }
      .value {
        display: inline-block;
        float: right;
        color: #667eea;
        font-weight: bold;
      }
      .emoji-selector {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 8px;
        margin: 10px 0;
      }
      .emoji-btn {
        font-size: 28px;
        padding: 8px;
        border: 2px solid transparent;
        border-radius: 8px;
        background: #f5f5f5;
        cursor: pointer;
        transition: all 0.2s;
      }
      .emoji-btn:hover {
        transform: scale(1.1);
        background: #fff;
      }
      .emoji-btn.selected {
        border-color: #667eea;
        background: #e8ebff;
        transform: scale(1.15);
      }
      button {
        width: 100%;
        padding: 12px;
        margin-top: 10px;
        border: none;
        border-radius: 8px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: transform 0.2s;
      }
      button:hover {
        transform: translateY(-2px);
      }
      button:active {
        transform: translateY(0);
      }
      #stats {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.95);
        padding: 15px 20px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        color: #333;
        font-size: 14px;
        backdrop-filter: blur(10px);
      }
      .stat-item {
        margin: 5px 0;
      }
      .stat-value {
        font-weight: bold;
        color: #667eea;
      }
      #instructions {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 255, 255, 0.95);
        padding: 15px 25px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        text-align: center;
        color: #555;
        font-size: 14px;
        backdrop-filter: blur(10px);
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"></canvas>

    <div id="controls">
      <h2>🎯 Emoji Shooter</h2>

      <div class="control-group">
        <label>Power <span class="value" id="powerValue">50</span></label>
        <input type="range" id="power" min="10" max="100" value="50" />
      </div>

      <div class="control-group">
        <label>Gravity <span class="value" id="gravityValue">0.5</span></label>
        <input
          type="range"
          id="gravity"
          min="0.1"
          max="2"
          step="0.1"
          value="0.5"
        />
      </div>

      <div class="control-group">
        <label>Bounce <span class="value" id="bounceValue">0.7</span></label>
        <input
          type="range"
          id="bounce"
          min="0"
          max="0.95"
          step="0.05"
          value="0.7"
        />
      </div>

      <div class="control-group">
        <label>Wind <span class="value" id="windValue">0.0</span></label>
        <input type="range" id="wind" min="-2" max="2" step="0.1" value="0" />
      </div>

      <div class="control-group">
        <label>Select Emoji</label>
        <div class="emoji-selector" id="emojiSelector"></div>
      </div>

      <button id="clearBtn">Clear All Emojis</button>
    </div>

    <div id="stats">
      <div class="stat-item">
        Emojis: <span class="stat-value" id="emojiCount">0</span>
      </div>
      <div class="stat-item">
        FPS: <span class="stat-value" id="fps">60</span>
      </div>
    </div>

    <div id="instructions">
      <strong>Click anywhere</strong> to shoot emojis! 🚀<br />
      Drag for trajectory preview
    </div>

    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      // Physics settings
      let settings = {
        power: 50,
        gravity: 0.5,
        bounce: 0.7,
        wind: 0,
        friction: 0.99,
      };

      // Available emojis
      const emojiList = [
        "😀",
        "🎉",
        "❤️",
        "⭐",
        "🔥",
        "💎",
        "🌈",
        "⚡",
        "🎈",
        "🍕",
        "🎮",
        "🚀",
        "🌸",
        "🦄",
        "👻",
        "🎵",
        "🏀",
        "🍦",
        "🎨",
        "🌙",
      ];
      let selectedEmoji = "😀";

      // Emoji particles
      let emojis = [];
      let mouseDown = false;
      let startX, startY;
      let currentX, currentY;

      // FPS tracking
      let fps = 60;
      let lastTime = performance.now();
      let frames = 0;

      class Emoji {
        constructor(x, y, vx, vy, emoji) {
          this.x = x;
          this.y = y;
          this.vx = vx;
          this.vy = vy;
          this.emoji = emoji;
          this.size = 30 + Math.random() * 20;
          this.rotation = Math.random() * Math.PI * 2;
          this.rotationSpeed = (Math.random() - 0.5) * 0.2;
          this.life = 1;
          this.fadeRate = 0.001;
        }

        update() {
          // Apply gravity
          this.vy += settings.gravity;

          // Apply wind
          this.vx += settings.wind * 0.1;

          // Apply friction
          this.vx *= settings.friction;
          this.vy *= settings.friction;

          // Update position
          this.x += this.vx;
          this.y += this.vy;

          // Update rotation
          this.rotation += this.rotationSpeed;

          // Floor collision with bounce
          if (this.y + this.size / 2 > canvas.height) {
            this.y = canvas.height - this.size / 2;
            this.vy *= -settings.bounce;
            this.vx *= 0.95; // friction on ground
            this.rotationSpeed *= 0.8;

            // Stop if velocity is too small
            if (Math.abs(this.vy) < 1) {
              this.vy = 0;
            }
          }

          // Wall collisions with bounce
          if (this.x - this.size / 2 < 0) {
            this.x = this.size / 2;
            this.vx *= -settings.bounce;
          } else if (this.x + this.size / 2 > canvas.width) {
            this.x = canvas.width - this.size / 2;
            this.vx *= -settings.bounce;
          }

          // Ceiling collision
          if (this.y - this.size / 2 < 0) {
            this.y = this.size / 2;
            this.vy *= -settings.bounce;
          }

          // Fade out over time
          this.life -= this.fadeRate;

          return this.life > 0;
        }

        draw() {
          ctx.save();
          ctx.globalAlpha = Math.max(0, this.life);
          ctx.translate(this.x, this.y);
          ctx.rotate(this.rotation);
          ctx.font = `${this.size}px Arial`;
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.fillText(this.emoji, 0, 0);
          ctx.restore();
        }
      }

      // Setup emoji selector
      function setupEmojiSelector() {
        const selector = document.getElementById("emojiSelector");
        emojiList.forEach((emoji, index) => {
          const btn = document.createElement("button");
          btn.className = "emoji-btn";
          btn.textContent = emoji;
          if (index === 0) btn.classList.add("selected");
          btn.onclick = () => {
            document
              .querySelectorAll(".emoji-btn")
              .forEach((b) => b.classList.remove("selected"));
            btn.classList.add("selected");
            selectedEmoji = emoji;
          };
          selector.appendChild(btn);
        });
      }

      // Setup controls
      function setupControls() {
        document.getElementById("power").addEventListener("input", (e) => {
          settings.power = parseFloat(e.target.value);
          document.getElementById("powerValue").textContent = settings.power;
        });

        document.getElementById("gravity").addEventListener("input", (e) => {
          settings.gravity = parseFloat(e.target.value);
          document.getElementById("gravityValue").textContent =
            settings.gravity.toFixed(1);
        });

        document.getElementById("bounce").addEventListener("input", (e) => {
          settings.bounce = parseFloat(e.target.value);
          document.getElementById("bounceValue").textContent =
            settings.bounce.toFixed(2);
        });

        document.getElementById("wind").addEventListener("input", (e) => {
          settings.wind = parseFloat(e.target.value);
          document.getElementById("windValue").textContent =
            settings.wind.toFixed(1);
        });

        document.getElementById("clearBtn").addEventListener("click", () => {
          emojis = [];
        });
      }

      // Mouse events
      canvas.addEventListener("mousedown", (e) => {
        mouseDown = true;
        startX = e.clientX;
        startY = e.clientY;
        currentX = e.clientX;
        currentY = e.clientY;
      });

      canvas.addEventListener("mousemove", (e) => {
        if (mouseDown) {
          currentX = e.clientX;
          currentY = e.clientY;
        }
      });

      canvas.addEventListener("mouseup", (e) => {
        if (mouseDown) {
          const dx = (startX - e.clientX) * (settings.power / 1000);
          const dy = (startY - e.clientY) * (settings.power / 1000);

          // Create emoji with velocity
          emojis.push(new Emoji(startX, startY, dx, dy, selectedEmoji));
        }
        mouseDown = false;
      });

      // Touch events for mobile
      canvas.addEventListener("touchstart", (e) => {
        e.preventDefault();
        const touch = e.touches[0];
        mouseDown = true;
        startX = touch.clientX;
        startY = touch.clientY;
        currentX = touch.clientX;
        currentY = touch.clientY;
      });

      canvas.addEventListener("touchmove", (e) => {
        e.preventDefault();
        if (mouseDown) {
          const touch = e.touches[0];
          currentX = touch.clientX;
          currentY = touch.clientY;
        }
      });

      canvas.addEventListener("touchend", (e) => {
        e.preventDefault();
        if (mouseDown) {
          const dx = (startX - currentX) * (settings.power / 1000);
          const dy = (startY - currentY) * (settings.power / 1000);
          emojis.push(new Emoji(startX, startY, dx, dy, selectedEmoji));
        }
        mouseDown = false;
      });

      // Draw trajectory preview
      function drawTrajectory() {
        if (!mouseDown) return;

        ctx.strokeStyle = "rgba(255, 255, 255, 0.6)";
        ctx.lineWidth = 2;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.moveTo(startX, startY);
        ctx.lineTo(currentX, currentY);
        ctx.stroke();
        ctx.setLineDash([]);

        // Draw arrow
        const angle = Math.atan2(currentY - startY, currentX - startX);
        const arrowSize = 15;
        ctx.fillStyle = "rgba(255, 255, 255, 0.8)";
        ctx.beginPath();
        ctx.moveTo(currentX, currentY);
        ctx.lineTo(
          currentX - arrowSize * Math.cos(angle - Math.PI / 6),
          currentY - arrowSize * Math.sin(angle - Math.PI / 6)
        );
        ctx.lineTo(
          currentX - arrowSize * Math.cos(angle + Math.PI / 6),
          currentY - arrowSize * Math.sin(angle + Math.PI / 6)
        );
        ctx.closePath();
        ctx.fill();
      }

      // Animation loop
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Update and draw all emojis
        emojis = emojis.filter((emoji) => emoji.update());
        emojis.forEach((emoji) => emoji.draw());

        // Draw trajectory preview
        drawTrajectory();

        // Update stats
        document.getElementById("emojiCount").textContent = emojis.length;

        // Calculate FPS
        frames++;
        const currentTime = performance.now();
        if (currentTime >= lastTime + 1000) {
          fps = Math.round((frames * 1000) / (currentTime - lastTime));
          document.getElementById("fps").textContent = fps;
          frames = 0;
          lastTime = currentTime;
        }

        requestAnimationFrame(animate);
      }

      // Handle window resize
      window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });

      // Initialize
      setupEmojiSelector();
      setupControls();
      animate();
    </script>
  </body>
</html>
